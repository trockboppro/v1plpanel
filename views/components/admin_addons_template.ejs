<!doctype html>
<html class="h-full w-full">
<head>
  <title><%= name %></title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://api.fontshare.com/v2/css?f[]=general-sans@300,400,500,600,700&display=swap" rel="stylesheet">
</head>

<body class="bg-[#0f0f0f] h-full w-full text-white" style="font-family:'General Sans'">

<style>
/* ===== SIDEBAR COLLAPSE ===== */
.collapsed span,
.collapsed p,
.collapsed h1 { display:none }
.collapsed { width:4%!important }
.colcont { padding-left:4.2rem }

/* ===== TRANSITION ===== */
.transition { transition: all .3s ease }

/* ===== ACTIVE ITEM ===== */
#active-background{
  position:absolute;
  left:1rem;
  width:calc(100% - 2rem);
  height:2.25rem;
  background:linear-gradient(90deg,#facc15,#eab308);
  opacity:.15;
  border-radius:.75rem;
  transition:.3s;
  z-index:0;
}
.nav-link{ position:relative; z-index:1 }
.nav-link.active{
  color:#facc15;
  font-weight:600;
}
</style>

<!-- SIDEBAR -->
<div class="sidebar transition hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-56 lg:flex-col">
  <div class="flex grow flex-col gap-y-5 bg-[#0b0b0b] border-r border-yellow-500/10">

    <nav class="flex flex-1 flex-col">
      <div class="pl-6 pt-5 pb-4">
        <a href="/" class="flex items-center gap-3">
          <% if (logo == true) { %>
          <img src="../assets/logo.png" class="h-7 w-7 rounded">
          <% } %>
          <h1 class="text-lg font-semibold text-yellow-400"><%= name %></h1>
        </a>
      </div>

      <ul class="flex flex-1 flex-col gap-y-6 relative">
        <div id="active-background"></div>

        <li>
          <a href="/admin/overview"
             class="nav-link mx-4 px-4 py-1.5 rounded-xl flex gap-3 text-neutral-400 hover:text-yellow-400 hover:bg-yellow-500/10 transition">
            ← Go Back
          </a>
        </li>

        <li>
          <a href="/admin/plugins"
             class="nav-link mx-4 px-4 py-1.5 rounded-xl flex gap-3 text-neutral-400 hover:text-yellow-400 hover:bg-yellow-500/10 transition">
            Overview
          </a>
        </li>

        <p class="pl-8 pt-6 text-xs font-semibold text-yellow-500/80">PLUGINS</p>

        <% Object.keys(pluginsidebar).forEach(plugin => { %>
        <li>
          <a href="<%= pluginsidebar[plugin] %>"
             class="nav-link mx-4 px-4 py-1.5 rounded-xl flex gap-3 text-neutral-400 hover:text-yellow-400 hover:bg-yellow-500/10 transition">
            <%= plugin %>
          </a>
        </li>
        <% }) %>

        <li class="mt-auto border-t border-yellow-500/10">
          <a href="/auth/logout"
             class="flex gap-3 px-6 py-4 text-sm text-neutral-400 hover:text-yellow-400 transition">
            Logout
          </a>
        </li>
      </ul>
    </nav>
  </div>
</div>

<!-- CONTENT -->
<div id="colcont" class="lg:pl-56">

<!-- TOP BAR -->
<div class="sticky top-0 z-40 h-16 flex items-center gap-4 px-4 bg-[#0f0f0f]/70 backdrop-blur border-b border-yellow-500/10">

  <button id="sidebar-toggle"
    class="p-2 rounded-xl border border-yellow-500/20 text-yellow-400 hover:bg-yellow-500/10 transition">
    ☰
  </button>

  <!-- SEARCH -->
  <div class="flex items-center px-4 h-10 rounded-xl border border-yellow-500/20">
    <input class="bg-transparent placeholder:text-yellow-500/50 focus:outline-none"
      placeholder="<%= req.translations.search %>">
  </div>

  <!-- USER -->
  <div class="ml-auto flex items-center gap-3">
    <img class="h-8 w-8 rounded-lg"
      src="https://api.dicebear.com/9.x/thumbs/svg?seed=<%= user.username %>">
    <span class="text-yellow-400 font-medium"><%= user.username %></span>
  </div>
</div>

<!-- LOADER -->
<div id="loader"
 class="fixed inset-0 flex items-center justify-center bg-[#0f0f0f] z-50">
  <svg class="animate-spin h-6 w-6 text-yellow-400" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"/>
    <path class="opacity-75" fill="currentColor"
      d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"/>
  </svg>
</div>

</div>

<!-- JS -->
<script>
document.addEventListener('DOMContentLoaded',()=>{
  const links=document.querySelectorAll('.nav-link');
  const bg=document.getElementById('active-background');
  links.forEach(l=>{
    if(l.href===location.href){
      l.classList.add('active');
      bg.style.transform=`translateY(${l.offsetTop}px)`
    }
  })
})
</script>

</body>
</html>
